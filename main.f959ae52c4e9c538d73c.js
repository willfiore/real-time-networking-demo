(self.webpackChunkfast_paced_networking_demo=self.webpackChunkfast_paced_networking_demo||[]).push([[179],{192:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(645),i=n.n(r)()(!0);i.push([e.id,'input:focus{outline:none}html{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}*,*:before,*:after{-webkit-box-sizing:inherit;-moz-box-sizing:inherit;box-sizing:inherit}body{margin:0;padding:0;color:#000;width:100%;height:100%;overflow:hidden;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}#root{position:absolute;width:100%;height:100%;background:#141414;gap:4px;display:grid;place-items:center}.pane{background-color:#fff;overflow:hidden;border-radius:4px;position:relative;width:640px;height:480px;box-shadow:0 0 10px 0 rgba(0,0,0,.3)}.pane .label{position:absolute;width:100%;background-color:rgba(221,221,221,.801);padding:8px}.pane .entity{position:absolute;top:0;left:0;width:20px;height:20px;border-radius:10px;background-color:#000;transform-box:content-box}.pane .entity.ghost{opacity:.3}',"",{version:3,sources:["webpack://src/style.scss"],names:[],mappings:"AAWI,YACI,YAAA,CAKR,KACI,6BAAA,CACA,0BAAA,CACA,qBAAA,CAGJ,mBACI,0BAAA,CACA,uBAAA,CACA,kBAAA,CAGJ,KACI,QAAA,CACA,SAAA,CACA,UAAA,CAEA,UAAA,CACA,WAAA,CAEA,eAAA,CAEA,gJAAA,CAGJ,MACI,iBAAA,CACA,UAAA,CACA,WAAA,CAEA,kBAAA,CAEA,OAAA,CAEA,YAAA,CACA,kBAAA,CAGJ,MACI,qBAAA,CACA,eAAA,CAEA,iBAAA,CACA,iBAAA,CACA,WAAA,CACA,YAAA,CAEA,oCAAA,CAEA,aACI,iBAAA,CACA,UAAA,CACA,uCAAA,CACA,WAAA,CAGJ,cACI,iBAAA,CAEA,KAAA,CACA,MAAA,CAIA,UAFK,CAGL,WAHK,CAIL,kBAAA,CAEA,qBAAA,CAEA,yBAAA,CAEA,oBACI,UAAA",sourcesContent:['%no-select {\r\n  -webkit-touch-callout: none; /* iOS Safari */\r\n    -webkit-user-select: none; /* Safari */\r\n     -khtml-user-select: none; /* Konqueror HTML */\r\n       -moz-user-select: none; /* Old versions of Firefox */\r\n        -ms-user-select: none; /* Internet Explorer/Edge */\r\n            user-select: none; /* Non-prefixed version, currently\r\n                                  supported by Chrome, Edge, Opera and Firefox */\r\n}\r\n\r\ninput {\r\n    &:focus {\r\n        outline: none;\r\n    }\r\n}\r\n\r\n// Box-sizing model\r\nhtml {\r\n    -webkit-box-sizing: border-box;\r\n    -moz-box-sizing: border-box;\r\n    box-sizing: border-box;\r\n}\r\n\r\n*, *:before, *:after {\r\n    -webkit-box-sizing: inherit;\r\n    -moz-box-sizing: inherit;\r\n    box-sizing: inherit;\r\n}\r\n\r\nbody {\r\n    margin: 0;\r\n    padding: 0;\r\n    color: black;\r\n\r\n    width: 100%;\r\n    height: 100%;\r\n\r\n    overflow: hidden;\r\n\r\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\r\n}\r\n\r\n#root {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n\r\n    background: rgb(20, 20, 20);\r\n\r\n    gap: 4px;\r\n\r\n    display: grid;\r\n    place-items: center;\r\n}\r\n\r\n.pane {\r\n    background-color: white;\r\n    overflow: hidden;\r\n\r\n    border-radius: 4px;\r\n    position: relative;\r\n    width: 640px;\r\n    height: 480px;\r\n\r\n    box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.3);\r\n\r\n    .label {\r\n        position: absolute;\r\n        width: 100%;\r\n        background-color: rgba(221, 221, 221, 0.801);\r\n        padding: 8px;\r\n    }\r\n\r\n    .entity {\r\n        position: absolute;\r\n\r\n        top: 0;\r\n        left: 0;\r\n\r\n        $sz: 20px;\r\n\r\n        width: $sz;\r\n        height: $sz;\r\n        border-radius: $sz / 2;\r\n\r\n        background-color: black;\r\n\r\n        transform-box: content-box;\r\n\r\n        &.ghost {\r\n            opacity: 0.3;\r\n        }\r\n    }\r\n}'],sourceRoot:""}]);const o=i},404:(e,t,n)=>{var r=n(379),i=n(192);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.id,i,""]]);r(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},536:(e,t,n)=>{"use strict";n(404);var r=n(486);function i(e,t,n){return e+(t-e)*n}var o=1/90,a={server:{tick:0,tickDuration:o,tickAccumulator:0,game:{entities:[]}},client:{game:{entities:[]},net:{sim:{latency:200,jitter:0,packetLoss:0,inFlightMessages:[]},measured:{latency:0,jitter:0,packetLoss:0,jitterBackBuffer:[]},lastReceivedTick:0,backBuffer:[],interpolationDelay:2},tick:0,tickDuration:o,clockPaused:!1,tickAccumulator:0,prevNetState:null,nextNetState:null,display:{entityHtmlElements:[]}}};function s(e){a.server.game.entities.forEach((function(t,n){Math.random()<.05&&(t.angularVelocity=2*Math.random()-1),t.angle+=t.angularVelocity*e;var r={x:Math.cos(t.angle)*t.speed,y:Math.sin(t.angle)*t.speed};t.position.x+=r.x*e,t.position.y+=r.y*e,t.position.x>1?(t.position.x=1,r.x=-Math.abs(r.x)):t.position.x<0&&(t.position.x=0,r.x=Math.abs(r.x)),t.position.y>1?(t.position.y=1,r.y=-Math.abs(r.y)):t.position.y<0&&(t.position.y=0,r.y=Math.abs(r.y)),t.angle=Math.atan2(r.y,r.x),t.angle<0&&(t.angle+=2*Math.PI),c(a.client.display.entityHtmlElements[n][0],t.position.x,t.position.y)})),a.server.tick++}function c(e,t,n){var r=e.parentElement.clientWidth,i=e.parentElement.clientHeight;e.style.transform="translateX("+t*(r-20)+"px)\n                          translateY("+n*(i-20)+"px)"}window.app=a;var A=0;window.addEventListener("load",(function(){!function(){for(var e=0;e<2;++e)for(var t=0;t<4;++t){var n={position:{x:.5,y:.5},speed:0,angle:0,angularVelocity:0};0===e?(n.position={x:Math.random(),y:Math.random()},n.speed=.2*Math.random()+.1,n.angle=2*Math.random()*Math.PI,a.server.game.entities.push(n)):a.client.game.entities.push(n)}}(),function(){var e=document.createElement("div");e.className="pane";for(var t=0;t<4;++t){for(var n=[],r=0;r<3;++r){var i=document.createElement("div");i.className="entity",2!==r&&(i.className+=" ghost");var o=void 0;switch(t%4){case 0:o="red";break;case 1:o="green";break;case 2:o="blue";break;case 3:o="orange";break;default:o="black"}i.style.backgroundColor=o,n[r]=i,e.append(i)}a.client.display.entityHtmlElements.push(n)}document.getElementById("root").append(e)}(),requestAnimationFrame((function e(t){(function(e){var t=(e-A)/1e3;A=e,a.server.tickAccumulator+=t;for(var n,l=!1;a.server.tickAccumulator>a.server.tickDuration;)a.server.tickAccumulator-=a.server.tickDuration,s(a.server.tickDuration),l=!0;l&&(n={tick:a.server.tick,entityPositions:a.server.game.entities.map((function(e){return e.position}))},[a.client].forEach((function(e){if(!(Math.random()<e.net.sim.packetLoss)){var t=e.net.sim.latency,i=(2*Math.random()-1)*e.net.sim.jitter,o={message:(0,r.cloneDeep)(n),timeRemaining:(t/2+i)/1e3};e.net.sim.inFlightMessages.push(o)}}))),[a.client].forEach((function(e){var n;if(e.net.sim.inFlightMessages=e.net.sim.inFlightMessages.filter((function(n){return n.timeRemaining-=t,!(n.timeRemaining<=0&&(function(e,t){var n=e.tick+e.tickAccumulator/e.tickDuration,i=t.tick-n;e.net.measured.jitterBackBuffer.push(i),e.net.measured.jitterBackBuffer.length>5&&e.net.measured.jitterBackBuffer.splice(0,e.net.measured.jitterBackBuffer.length-5);var a=e.net.measured.jitterBackBuffer.reduce((function(e,t){return e+t}),0)/e.net.measured.jitterBackBuffer.length;e.tickDuration=Math.max(.01,o-a*o*.01),t.tick<e.net.lastReceivedTick||(e.net.lastReceivedTick=t.tick,e.clockPaused&&(console.log("Clock resumed",e.tick,e.tickAccumulator,t.tick),e.clockPaused=!1,e.tick=t.tick,e.tickAccumulator=0),e.net.backBuffer.push((0,r.cloneDeep)(t)),t.entityPositions.forEach((function(t,n){c(e.display.entityHtmlElements[n][1],t.x,t.y)})))}(e,n.message),1))})),!e.clockPaused)for(e.tickAccumulator+=t;e.tickAccumulator>e.tickDuration;)e.tickAccumulator-=e.tickDuration,e.tick++;var s=e.tick+e.tickAccumulator/e.tickDuration-e.net.interpolationDelay;if(0===e.net.backBuffer.length||s>e.net.backBuffer[e.net.backBuffer.length-1].tick)a.client.clockPaused||(console.log("Clock paused"),a.client.clockPaused=!0);else{var A=e.net.backBuffer.findIndex((function(e){return e.tick>s}));if(e.prevNetState=A>0?e.net.backBuffer[A-1]:null,e.nextNetState=null!==(n=e.net.backBuffer[A])&&void 0!==n?n:null,e.net.backBuffer.splice(0,A-1),null!==e.nextNetState&&null!==e.prevNetState){var l=s,u=e.prevNetState.tick,d=e.nextNetState.tick,p=1-(d-l)/(d-u);e.game.entities.forEach((function(t,n){var r=e.prevNetState.entityPositions[n],o=e.nextNetState.entityPositions[n],a={x:i(r.x,o.x,p),y:i(r.y,o.y,p)};t.position=a}))}}}));for(var u=0;u<4;++u){var d=a.client.game.entities[u];c(a.client.display.entityHtmlElements[u][2],d.position.x,d.position.y)}})(t),window.requestAnimationFrame(e)}))}))}},0,[[536,666,216]]]);
//# sourceMappingURL=main.f959ae52c4e9c538d73c.js.map